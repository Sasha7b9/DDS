#pragma once
#include "command.h"
#include "Message.h"
#include "Utils/String.h"


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class Items
{
public:

    static void Init();
    /// true означает, что идёт ожидание ответа от устройства
    static bool WaitAnswer()
    {
        return requestIsSend;
    }
    /// Послать запрос на количество итемов
    static void SendRequest();
    /// Возвращает количество итемов. -1 - запрос не посылался
    static int NumberDirs();

    static int NumberFiles()
    {
        return numFiles;
    }
    /// Возвращает имя i-го итема
    static String GetNameItem(int i);
    /// Возвращает номер текущего итема
    static int CurrentItem();
    /// Обработка нажатия кнопки "Вверх"
    static void PressUp();
    /// Обработка нажатия кнопки "Вниз"
    static void PressDown();

    class Handler
    {
        friend class FDrive;
        static bool Processing(Message *msg);
    };

private:
    /// Количество файлов в текущем каталоге
    static int numFiles;
    /// Запрос послан. Ожидается ответ
    static bool requestIsSend;

};
